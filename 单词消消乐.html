<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>æ³•è¯­è¯æ±‡æ¶ˆæ¶ˆä¹ï¼ˆèƒœåˆ©åŠ¨ç”»ç‰ˆï¼‰</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:-apple-system,Segoe UI,Roboto,sans-serif;
  background:linear-gradient(135deg,#d6e7ff,#f3f7ff);
  padding:20px;
}
.hidden{display:none!important;}
.app-container{max-width:900px;margin:auto;text-align:center;margin-top:60px;}

/* ===== æœç´¢æ¡†æ ·å¼ ===== */
#search-box{
  width:70%;max-width:480px;padding:14px 20px;font-size:18px;
  border-radius:50px;border:1px solid #ddd;outline:none;
  box-shadow:0 3px 12px rgba(0,0,0,.08);transition:.2s;
}
#search-box:focus{box-shadow:0 4px 16px rgba(0,0,0,.12);}
#search-btn{
  margin-top:20px;padding:10px 26px;border:none;border-radius:30px;
  background:#4d77ff;color:white;font-size:17px;cursor:pointer;
  box-shadow:0 4px 10px rgba(77,119,255,.4);transition:.2s;
}
#search-btn:hover{filter:brightness(1.05);}

/* ===== æ¸¸æˆè¯´æ˜å¡ç‰‡ ===== */
#game-instructions {
  margin: 30px auto 0;
  max-width: 650px;
  background: rgba(255,255,255,0.85);
  padding: 20px 26px;
  border-radius: 16px;
  text-align: left;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  font-size: 15px;
  line-height: 1.6;
  color:#333;
}
#game-instructions h3 {
  font-size: 18px;
  margin-bottom: 10px;
  color:#2a4a8a;
}

/* ===== æ¸¸æˆç•Œé¢ ===== */
#game-screen{
  background:#fff;padding:22px;border-radius:18px;
  box-shadow:0 6px 20px rgba(0,0,0,.08);
  margin-top:40px;text-align:left;
}
.top-bar{display:flex;justify-content:space-between;margin-bottom:12px;font-size:15px;}
.stats{display:flex;gap:20px;}

#game-board{
  margin-top:15px;display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:14px;
}
.card{
  padding:15px 12px;border-radius:999px;cursor:pointer;font-size:15px;
  font-weight:500;user-select:none;transition:.18s;box-shadow:0 4px 10px rgba(0,0,0,.12);
  border:2px solid transparent;text-align:center;
}
.fr{background:#e8f0ff;border-color:#5f8eff;color:#1548d1;}
.zh{background:#ffeaea;border-color:#ff6b6b;color:#c62828;}

.card:active{
  transform:scale(.93);
  box-shadow:0 2px 5px rgba(0,0,0,.08);
}

.selected{
  transform:scale(1.05);
  box-shadow:0 6px 16px rgba(0,0,0,.2);
}

.matched{
  opacity:0;transform:scale(.5);pointer-events:none;transition:.4s;
}

/* ========= èƒœåˆ©åŠ¨ç”»ï¼šå½©å¸¦ + æ˜Ÿå…‰ ========== */
#victory-bg {
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:200;
}
.confetti {
  position:absolute;
  width:8px;
  height:14px;
  background:var(--c);
  animation:fall linear forwards;
  opacity:.9;
}
@keyframes fall {
  to {
    transform:translateY(100vh) rotate(360deg);
    opacity:0.6;
  }
}

.star {
  position:absolute;
  width:4px;
  height:4px;
  background:white;
  border-radius:50%;
  animation:twinkle 1.5s infinite ease-in-out;
}
@keyframes twinkle {
  0%{opacity:0;}
  50%{opacity:1;}
  100%{opacity:0;}
}

/* èƒœåˆ©å¼¹çª— */
.overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.35);
  display:flex;justify-content:center;align-items:center;z-index:300;
}
.result-card{
  background:white;padding:30px;width:320px;border-radius:16px;
  text-align:center;box-shadow:0 10px 24px rgba(0,0,0,.26);
  animation:pop .25s ease-out;
}
@keyframes pop{
  from{transform:scale(.8);opacity:.5;}
  to{transform:scale(1);opacity:1;}
}
</style>
</head>

<body>
<div class="app-container">

<!-- ===== æ•´ä¸ªå¼€å§‹ç•Œé¢å®¹å™¨ï¼ˆæ¸¸æˆå¼€å§‹åå°†éšè—ï¼‰ ===== -->
<div id="start-screen-container">

  <h1 style="font-size:40px;margin-bottom:20px;">æ³•è¯­è¯æ±‡æ¶ˆæ¶ˆä¹</h1>

  <input id="search-box" type="text" placeholder="è¯·è¾“å…¥ä½ çš„åå­—â€¦">
  <button id="search-btn">å¼€å§‹å­¦ä¹  â–¶</button>

  <div id="game-instructions">
    <h3>ğŸ“˜ æ¸¸æˆç©æ³•è¯´æ˜</h3>
    <p>1. è¾“å…¥å§“åå¹¶ç‚¹å‡»ã€Œå¼€å§‹å­¦ä¹ ã€è¿›å…¥æ¸¸æˆã€‚</p>
    <p>2. ç‚¹å‡»è“è‰²çš„ <strong>æ³•è¯­æ³¡æ³¡</strong> å¯ä»¥å¬å‘éŸ³ã€‚</p>
    <p>3. å†ç‚¹å‡»å¯¹åº”çš„çº¢è‰² <strong>ä¸­æ–‡æ³¡æ³¡</strong> è¿›è¡Œé…å¯¹ã€‚</p>
    <p>4. è‹¥é…å¯¹æ­£ç¡®ï¼Œä¸¤å¼ æ³¡æ³¡ä¼šæ¶ˆå¤±ï¼›è‹¥é”™è¯¯åˆ™æ¢å¤å¹¶ +1 é”™è¯¯æ¬¡æ•°ã€‚</p>
    <p>5. å…¨éƒ¨è¯æ±‡é…å¯¹å®Œæˆåï¼Œå°†æ˜¾ç¤ºæˆç»©ã€æ€»ç”¨æ—¶ä¸é”™è¯¯æ¬¡æ•°ã€‚</p>
  </div>

</div>

<!-- ================= æ¸¸æˆç•Œé¢ ================= -->
<section id="game-screen" class="hidden">
  <div class="top-bar">
    <div>ğŸ‘¤ å­¦ç”Ÿï¼š<span id="display-name">â€”</span></div>
    <div class="stats">
      <div>â± æ—¶é—´ï¼š<span id="time-display">00:00</span></div>
      <div>âŒ é”™è¯¯ï¼š<span id="error-count">0</span></div>
    </div>
  </div>
  <div id="game-board"></div>
</section>

<div id="victory-bg" class="hidden"></div>

<div id="result-overlay" class="overlay hidden">
  <div class="result-card">
    <div style="font-size:40px;">ğŸ†</div>
    <h2>æ­å–œå®Œæˆå…¨éƒ¨é…å¯¹ï¼</h2>
    <p>å§“åï¼š<span id="result-name"></span></p>
    <p>ç”¨æ—¶ï¼š<span id="result-time"></span></p>
    <p>é”™è¯¯ï¼š<span id="result-errors"></span></p>
    <button id="play-again-btn"
      style="margin-top:18px;padding:10px 20px;background:#5f8eff;color:white;border:none;border-radius:10px;cursor:pointer;">
      å†ç©ä¸€æ¬¡ ğŸ”
    </button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const vocabPairs=[    { fr: 'servir Ã  qn', zh: 'å¯¹æŸäººæœ‰ç”¨' },    { fr: 'serrer qn contre son cÅ“ur', zh: 'å°†æŸäººç´§ç´§æŠ±åœ¨æ€€é‡Œ' },    { fr: 'avec calme', zh: 'å¹³é™åœ°ï¼›å†·é™åœ°' },    { fr: 'timide', zh: 'ç¾æ€¯çš„ï¼›è…¼è…†çš„' },    { fr: 'dur', zh: 'ç¡¬çš„ï¼›è‰°éš¾çš„' },    { fr: 'sâ€™abriter', zh: 'èº²é¿ï¼›é¿éš¾' },    { fr: 'optimiste', zh: 'ä¹è§‚çš„' },    { fr: 'pessimiste', zh: 'æ‚²è§‚çš„' },    { fr: 'en bons termes', zh: 'å…³ç³»èæ´½' },    { fr: 'rÃ©servÃ©(e)', zh: 'å†…å‘çš„ï¼›çŸœæŒçš„' },    { fr: 'bavard(e)', zh: 'çˆ±è¯´è¯çš„ï¼›å” å¨çš„' },    { fr: 'arrogant(e)', zh: 'å‚²æ…¢çš„ï¼›è‡ªå¤§çš„' },    { fr: 'temporaire', zh: 'ä¸´æ—¶çš„ï¼›æš‚æ—¶çš„' },    { fr: 'hÃ©sitant(e)', zh: 'çŠ¹è±«çš„' },    { fr: 'doux(ce)', zh: 'æŸ”è½¯çš„ï¼›æ¸©å’Œçš„ï¼›ç”œçš„' },    { fr: 'tendre', zh: 'å«©çš„ï¼›æŸ”è½¯çš„ï¼›æ¸©æŸ”çš„' },    { fr: 'se dÃ©courager', zh: 'ç°å¿ƒï¼›æ³„æ°”' },    { fr: 'sâ€™exposer', zh: 'æš´éœ²è‡ªå·±ï¼›å†’é™©' },    { fr: 'confiant(e)', zh: 'è‡ªä¿¡çš„ï¼›ä¿¡ä»»çš„' },    { fr: 'rater le projet', zh: 'é¡¹ç›®å¤±è´¥ï¼›æŠŠé¡¹ç›®æç ¸' },    { fr: 'mener qch Ã  bien', zh: 'æŠŠæŸäº‹é¡ºåˆ©å®Œæˆ' },    { fr: 'en conflit', zh: 'å¤„äºå†²çªä¸­' },    { fr: 'en paix', zh: 'å’Œå¹³ç›¸å¤„ï¼›å®‰å®åœ°' },];

const searchBtn=document.getElementById("search-btn");
const searchBox=document.getElementById("search-box");
const gameScreen=document.getElementById("game-screen");
const startContainer=document.getElementById("start-screen-container");
const displayName=document.getElementById("display-name");
const gameBoard=document.getElementById("game-board");
const timeDisplay=document.getElementById("time-display");
const errorDisplay=document.getElementById("error-count");
const resultOverlay=document.getElementById("result-overlay");
const resultName=document.getElementById("result-name");
const resultTime=document.getElementById("result-time");
const resultErrors=document.getElementById("result-errors");
const playAgainBtn=document.getElementById("play-again-btn");
const victoryBG=document.getElementById("victory-bg");

let first=null,lock=false,errors=0,matched=0,seconds=0,timer=null;

function speakFR(text){
  const u=new SpeechSynthesisUtterance(text);
  u.lang="fr-FR";
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function startTimer(){
  seconds=0;
  timeDisplay.textContent="00:00";
  timer=setInterval(()=>{
    seconds++;
    let mm=String(Math.floor(seconds/60)).padStart(2,"0");
    let ss=String(seconds%60).padStart(2,"0");
    timeDisplay.textContent=`${mm}:${ss}`;
  },1000);
}

function buildGame(){
  first=null;lock=false;errors=0;matched=0;
  errorDisplay.textContent=0;
  gameBoard.innerHTML="";

  let cards=[];
  vocabPairs.forEach((v,i)=>{
    cards.push({id:i,text:v.fr,lang:"fr"});
    cards.push({id:i,text:v.zh,lang:"zh"});
  });

  cards.sort(()=>Math.random()-.5);

  cards.forEach(c=>{
    const el=document.createElement("div");
    el.className=`card ${c.lang}`;
    el.textContent=c.text;
    el.dataset.id=c.id;
    el.dataset.lang=c.lang;
    el.onclick=()=>selectCard(el);
    gameBoard.appendChild(el);
  });

  startTimer();
}

function selectCard(card){
  if(lock || card.classList.contains("matched")) return;

  if(card.dataset.lang==="fr") speakFR(card.textContent);

  card.classList.add("selected");

  if(!first){ first=card; return; }

  let match= first.dataset.id===card.dataset.id && first.dataset.lang!==card.dataset.lang;

  if(match){
    card.classList.add("matched");
    first.classList.add("matched");
    matched+=2;
    first=null;

    if(matched===vocabPairs.length*2){
      finishGame();
    }
  }else{
    lock=true;
    errors++; errorDisplay.textContent=errors;
    setTimeout(()=>{
      first.classList.remove("selected");
      card.classList.remove("selected");
      first=null; lock=false;
    },700);
  }
}

function launchVictoryAnimation(){
  victoryBG.innerHTML="";
  victoryBG.classList.remove("hidden");

  for(let i=0;i<80;i++){
    const c=document.createElement("div");
    c.className="confetti";
    c.style.left=Math.random()*100+"vw";
    c.style.top="-20px";
    c.style.setProperty("--c",`hsl(${Math.random()*360},80%,60%)`);
    c.style.animationDuration=1.5+Math.random()*1.4+"s";
    victoryBG.appendChild(c);
  }

  for(let i=0;i<40;i++){
    const s=document.createElement("div");
    s.className="star";
    s.style.left=Math.random()*100+"vw";
    s.style.top=Math.random()*100+"vh";
    s.style.animationDelay=Math.random()*2+"s";
    victoryBG.appendChild(s);
  }
}

function finishGame(){
  clearInterval(timer);
  launchVictoryAnimation();
  resultName.textContent=displayName.textContent;
  resultTime.textContent=timeDisplay.textContent;
  resultErrors.textContent=errors;
  resultOverlay.classList.remove("hidden");
}

searchBtn.onclick=()=>{
  let name=searchBox.value.trim();
  if(!name){ alert("è¯·è¾“å…¥å§“åï¼"); return; }

  displayName.textContent=name;

  /* ğŸ”¥ æ¸¸æˆå¼€å§‹åéšè—æ•´ä¸ªå¼€å§‹ç•Œé¢ */
  startContainer.classList.add("hidden");

  gameScreen.classList.remove("hidden");
  buildGame();
};

playAgainBtn.onclick=()=>{
  victoryBG.classList.add("hidden");
  resultOverlay.classList.add("hidden");
  buildGame();
};

});
</script>

</body>
</html>
